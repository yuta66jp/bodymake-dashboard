# âš¡ Body Composition Tracker (AI-Powered)

Notionã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ã—ã¦æ´»ç”¨ã—ã€æ©Ÿæ¢°å­¦ç¿’ï¼ˆProphetï¼‰ã‚’ç”¨ã„ãŸä½“é‡äºˆæ¸¬ã¨TDEEï¼ˆç·æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼ï¼‰ã®é€†ç®—åˆ†æã‚’è¡Œã†ã€ãƒœãƒ‡ã‚£ãƒ¡ã‚¤ã‚¯æœ€é©åŒ–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã™ã€‚

æ¸›é‡ï¼ˆCutï¼‰ã‚„å¢—é‡ï¼ˆBulkï¼‰ã®é€²æ—ã‚’å¯è¦–åŒ–ã—ã€**ã€Œã„ã¤ç›®æ¨™ã‚’é”æˆã§ãã‚‹ã‹ã€**ã‚’è«–ç†çš„ã«ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¾ã™ã€‚

## ğŸš€ Key Features

### 1. ğŸ”® AI & Statistical Forecasting
* **Prophet (Metaç¤¾è£½AI):** éå»ã®ä½“é‡å¤‰å‹•ãƒˆãƒ¬ãƒ³ãƒ‰ã‚„å‘¨æœŸæ€§ã‚’å­¦ç¿’ã—ã€ç¾å®Ÿçš„ãªæœªæ¥ã®ä½“é‡æ¨ç§»ã‚’äºˆæ¸¬ã€‚
* **Linear Regression:** å˜ç´”ãªç·šå½¢å›å¸°ãƒˆãƒ¬ãƒ³ãƒ‰ã‚‚ä½µè¨˜ã—ã€AIäºˆæ¸¬ã¨ã®ä¹–é›¢ã‚’ç¢ºèªå¯èƒ½ã€‚
* **Simulated Projection:** ã€Œã‚‚ã—æ¯æ—¥2000kcalã§éã”ã—ãŸã‚‰ï¼Ÿã€ã¨ã„ã†ç†è«–å€¤ã‚’è¨ˆç®—ã—ã€AIäºˆæ¸¬ï¼ˆç¾å®Ÿï¼‰ã¨æ¯”è¼ƒã™ã‚‹ã“ã¨ã§ã€è¨ˆç”»ã®å®Ÿè¡Œå¯èƒ½æ€§ã‚’è©•ä¾¡ã€‚

### 2. ğŸ“Š TDEE Reverse Engineering
* **Logic:** æ¯æ—¥ã®ã€Œæ‘‚å–ã‚«ãƒ­ãƒªãƒ¼ã€ã¨ã€Œä½“é‡å¤‰å‹•ï¼ˆ7æ—¥ç§»å‹•å¹³å‡ï¼‰ã€ã‹ã‚‰ã€å®Ÿè³ªçš„ãªãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚«ãƒ­ãƒªãƒ¼ï¼ˆTDEEï¼‰ã‚’é€†ç®—ã€‚
* **Formula:** $TDEE = Intake - (\Delta Weight \times 7200kcal)$
* ã“ã‚Œã«ã‚ˆã‚Šã€è¨ˆç®—ä¸Šã®TDEEã§ã¯ãªãã€**ã€Œä»Šã®è‡ªåˆ†ã®ä»£è¬å®Ÿæ¸¬å€¤ã€**ã«åŸºã¥ã„ãŸã‚«ãƒ­ãƒªãƒ¼è¨­å®šãŒå¯èƒ½ã€‚

### 3. ğŸ± Notion-Integrated Food Log
* **Daily Log:** é£Ÿå“ãƒã‚¹ã‚¿ã‹ã‚‰é¸æŠã€ã¾ãŸã¯ã‚¯ã‚¤ãƒƒã‚¯å…¥åŠ›ã§é£Ÿäº‹ã‚’è¨˜éŒ²ã€‚Notionãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¸ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸã€‚
* **Menu Master:** ã€Œæœé£ŸAã‚»ãƒƒãƒˆã€ã®ã‚ˆã†ãªå®šå‹ã‚»ãƒƒãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’JSONå½¢å¼ã§Notionã«ä¿å­˜ã—ã€ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§å±•é–‹ãƒ»ç™»éŒ²å¯èƒ½ã€‚
* **Macro Analytics:** PFCãƒãƒ©ãƒ³ã‚¹ï¼ˆã‚¿ãƒ³ãƒ‘ã‚¯è³ªãƒ»è„‚è³ªãƒ»ç‚­æ°´åŒ–ç‰©ï¼‰ã®æ¯”ç‡ã‚’å¯è¦–åŒ–ã€‚

### 4. ğŸ“± Mobile First Design
* ã‚¹ãƒãƒ›ã§ã®æ“ä½œã«æœ€é©åŒ–ã€‚ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã™ã‚‹ã“ã¨ã§ã€ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªã®ã‚ˆã†ãªå…¨ç”»é¢UXã‚’æä¾›ã€‚

## ğŸ›  Tech Stack

| Category | Technology |
| --- | --- |
| **Frontend** | [Streamlit](https://streamlit.io/) |
| **Visualization** | [Plotly](https://plotly.com/) |
| **Backend / DB** | [Notion API](https://developers.notion.com/) |
| **Data Analysis** | [Pandas](https://pandas.pydata.org/), [NumPy](https://numpy.org/) |
| **Machine Learning** | [Prophet](https://facebook.github.io/prophet/), [Scikit-learn](https://scikit-learn.org/) |
| **Environment** | Python 3.11 |

## ğŸ“‚ Project Structure

```text
â”œâ”€â”€ app.py                # Main Application (UI)
â”œâ”€â”€ logic.py              # Data Analysis & AI Logic
â”œâ”€â”€ notion_db.py          # Notion API Wrapper (CRUD)
â”œâ”€â”€ import_data.py        # CSV Import Utility
â”œâ”€â”€ requirements.txt      # Dependencies
â””â”€â”€ .streamlit/
    â””â”€â”€ secrets.toml      # API Keys (Git-ignored)
```

## ğŸ—„ï¸ Database Schema (Notion)

æœ¬ã‚¢ãƒ—ãƒªã¯Notionä¸Šã«ä»¥ä¸‹ã®4ã¤ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å¿…è¦ã¨ã—ã¾ã™ã€‚

1.  **Daily Log DB** (æ—¥ã€…ã®è¨˜éŒ²)
    * `Date` (Date)
    * `Weight` (Number)
    * `Calories` (Number)
    * `Protein`, `Fat`, `Carbs` (Number)
    * `Note` (Text)

2.  **Food Master DB** (é£Ÿå“ãƒã‚¹ã‚¿)
    * `Name` (Title)
    * `Calories` (Number)
    * `Protein`, `Fat`, `Carbs` (Number)

3.  **Menu Master DB** (ã‚»ãƒƒãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¿å­˜)
    * `Name` (Title)
    * `Recipe` (Text/JSON) - â€»ã‚»ãƒƒãƒˆå†…å®¹ã‚’JSONå½¢å¼ã§æ ¼ç´

4.  **Settings DB** (è¨­å®šå€¤ç®¡ç†)
    * `Key` (Title) - ä¾‹: "target_weight", "current_phase"
    * `Value` (Number)
    * `ValueStr` (Text)

## ğŸš€ Installation

æ¨å¥¨ç’°å¢ƒ: Python 3.11 (Prophetã®äº’æ›æ€§ç¶­æŒã®ãŸã‚)

```bash
# 1. Clone the repository
git clone [https://github.com/yuuta66jp/bodymake-dashboard.git](hhttps://github.com/yuuta66jp/bodymake-dashboard.git)
cd bodymake-dashboard
```

# 2. Create virtual environment
```bash
python -m venv venv
source venv/bin/activate  # Mac/Linux
# venv\Scripts\activate   # Windows
```

# 3. Install dependencies
```bash
pip install -r requirements.txt
```

### Configuration
ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« `.streamlit/secrets.toml` ã‚’ä½œæˆã—ã€APIã‚­ãƒ¼ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚

```toml
NOTION_TOKEN = "secret_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
DATABASE_ID = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"       # Daily Log
FOOD_DATABASE_ID = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"  # Food Master
MENU_DATABASE_ID = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"  # Menu Master
SETTINGS_DATABASE_ID = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx" # Settings
```

### Run
ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã—ã¾ã™ã€‚

```bash
streamlit run app.py
```

## ğŸ”„ Deployment

æœ¬ã‚¢ãƒ—ãƒªã¯ **Streamlit Cloud** ã«é€£æºæ¸ˆã¿ã§ã™ã€‚
GitHubã® `main` ãƒ–ãƒ©ãƒ³ãƒã¸ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

1. **Push to GitHub:**
   ```bash
   git add .
   git commit -m "Update app"
   git push origin main
   ```

2. **Streamlit Cloud:**
GitHubã¸ã®ãƒ—ãƒƒã‚·ãƒ¥ã‚’è‡ªå‹•æ¤œçŸ¥ã—ã€æ•°åˆ†ã§æœ€æ–°ç‰ˆãŒæœ¬ç•ªç’°å¢ƒã«åæ˜ ã•ã‚Œã¾ã™ã€‚
ãƒ‡ãƒ—ãƒ­ã‚¤çŠ¶æ³ã¯ Streamlit Cloud ç®¡ç†ç”»é¢ã® "Manage app" ã‹ã‚‰ç¢ºèªã§ãã¾ã™ã€‚

## ğŸ‘¤ Author

* **Created by:** `yuuta66jp`
* **Goal:** 2027 Japan Class-Specific Bodybuilding Championship ğŸ¥‡

---
*Happy Training!* ğŸ‹ï¸â€â™‚ï¸
